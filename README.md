# è¿œç¨‹æ§åˆ¶å·¥å…·ï¼ˆRC-remote-controlsï¼‰
[Contributing](CONTRIBUTING.md) â€¢ [Changelog](Cè¿‘æœŸæ–°å¢ / å¼ºåŒ–ï¼ˆ2.2.8 â†’ 2.3.4ï¼‰ï¼š
- **V2.3.4 (2025-09-15)**: å¼‚æ­¥MQTTè¿æ¥ä¸è‡ªåŠ¨é‡è¿ï¼Œå¼±ç½‘ç¯å¢ƒç¨³å®šæ€§å¤§å¹…æå‡ï¼›ä¿®å¤paho-mqtt v2å…¼å®¹æ€§é—®é¢˜ï¼›å¢å¼ºæ¶ˆæ¯å¤„ç†å¥å£®æ€§ï¼Œé¿å…å•æ¡æ¶ˆæ¯å¼‚å¸¸ä¸­æ–­è¿›ç¨‹ã€‚
- **V2.3.2 (2025-09-03)**: å…¨å±€å¼‚å¸¸æ•è·é¿å…CrashSenderå¼¹çª—ï¼›æ‰˜ç›˜å¼‚æ­¥æ‰“å¼€æµè§ˆå™¨å¹¶å¢åŠ èŠ‚æµï¼›ç§»é™¤æœ¬åœ°å½©è›‹å›¾ç‰‡æ‰“åŒ…ï¼Œå‡å°ä½“ç§¯ï¼›ç»Ÿä¸€æµè§ˆå™¨è°ƒç”¨é€»è¾‘ï¼Œæå‡å…¼å®¹æ€§ã€‚
- åŠ¨æ€ç‰ˆæœ¬ç®¡ç†ï¼šç§»é™¤æºç ç¡¬ç¼–ç ç‰ˆæœ¬ï¼Œé›†ä¸­äº `version_info.py`ï¼Œæ‰“åŒ…ä¸å®‰è£…å™¨è„šæœ¬è‡ªåŠ¨æ³¨å…¥
- GitHub Actionsï¼šæ ‡ç­¾è§¦å‘è‡ªåŠ¨æ„å»ºä¸å‘å¸ƒï¼›é‡å¤åŒç‰ˆæœ¬æ„å»ºè‡ªåŠ¨åˆå¹¶æ›´æ–°æ—¥å¿—
- å¯åŠ¨æ—¥å¿—å¢å¼ºï¼šä¸»ç¨‹åºè¯¦ç»†è®°å½•ç‰ˆæœ¬/è¿è¡Œæ¨¡å¼/ç³»ç»Ÿç¯å¢ƒï¼Œä¾¿äºæ’éšœ
- æ‰˜ç›˜ç‰ˆæœ¬èœå•ï¼šç‚¹å‡»åå¼‚æ­¥æ£€æŸ¥æœ€æ–°ç‰ˆæœ¬ï¼Œèœå•æ–‡æœ¬å®æ—¶æ›´æ–°"æ£€æŸ¥ä¸­/æ–°ç‰ˆæœ¬/å·²æœ€æ–°/å¤±è´¥"çŠ¶æ€å¹¶ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤è¯·æ±‚
- å®‰è£…å™¨æ”¹è¿›ï¼šInno Setup åŠ¨æ€ç”Ÿæˆä¸´æ—¶è„šæœ¬æ³¨å…¥ç‰ˆæœ¬ï¼›ä¿®å¤è¯¯æŠ¥"ç¨‹åºæ­£åœ¨è¿è¡Œ"çš„è¿›ç¨‹æ£€æµ‹é€»è¾‘
- æ›´å¥å£®çš„æœªçŸ¥ç‰ˆæœ¬å¤„ç†ï¼šæœ¬åœ°ç‰ˆæœ¬ç¼ºå¤±æ—¶æ˜¾ç¤º"VæœªçŸ¥ç‰ˆæœ¬"å¹¶å§‹ç»ˆæç¤ºå¯æ›´æ–°
- æ„å»ºæ¸…æ´æ€§ï¼šæ‰“åŒ…è¿‡ç¨‹ä¸ä¿®æ”¹æºæ–‡ä»¶ï¼Œä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨æ¸…ç†.md) â€¢ [Full history](md/up.md)

ç®€è¿°ï¼šå°†ç”µè„‘â€œæ¨¡æ‹Ÿæˆâ€æ™ºèƒ½å®¶å±…è®¾å¤‡ï¼Œé€šè¿‡ MQTT å®ç°å¼€å…³æ§åˆ¶ã€è„šæœ¬æ‰§è¡Œã€åª’ä½“/äº®åº¦/éŸ³é‡æ§åˆ¶ã€æŒ‰é”®æ¨¡æ‹Ÿç­‰ã€‚

å£°æ˜ï¼šä»…ä¾›å­¦ä¹ äº¤æµï¼Œæœ¬äººä¸å¯¹ä½¿ç”¨æœ¬ç¨‹åºäº§ç”Ÿçš„ä»»ä½•åæœè´Ÿè´£ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚

â€” å½“å‰ç‰ˆæœ¬ï¼š2.3.4ï¼ˆWindowsï¼‰
(ç‰ˆæœ¬å·ç»Ÿä¸€ç”± `version_info.py` ç®¡ç†ï¼ŒCI/æœ¬åœ°æ‰“åŒ…å‡è‡ªåŠ¨æ³¨å…¥ï¼›è¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹æ­¤å¤„ã€‚å®Œæ•´æ›´æ–°å†å²è§ `md/up.md`ï¼‰

## What's new (2.3.4)

**å¼±ç½‘/å…¼å®¹æ€§ä¿®å¤ä¸å¯åŠ¨ç¨³å®šæ€§æ”¹è¿›**

### ğŸ”§ å…³é”®ä¿®å¤
- **å¼‚æ­¥MQTTè¿æ¥ä¸è‡ªåŠ¨é‡è¿**ï¼šè¿æ¥æµç¨‹æ”¹ä¸ºå¼‚æ­¥ `connect_async` + åå°å¾ªç¯ `loop_start()`ï¼Œå¹¶å¢åŠ è‡ªåŠ¨é‡è¿é€€é¿ï¼ˆ2s-30sï¼‰ï¼Œå¼±ç½‘æˆ–DNSè§£æå¤±è´¥æ—¶ç¨‹åºä¸å†ç›´æ¥é€€å‡ºï¼Œè€Œæ˜¯æŒç»­é‡è¯•å¹¶ä»¥æ›¿æ¢å¼é€šçŸ¥æç¤ºçŠ¶æ€ï¼Œç½‘ç»œæ¢å¤åè‡ªåŠ¨æ¸…é™¤æç¤ºã€‚
- **paho-mqtt v2å…¼å®¹æ€§**ï¼šä¿®å¤å›è°ƒç­¾åé—®é¢˜ï¼Œè°ƒæ•´ `on_disconnect` ä¸ºv2ç­¾åä»¥é¿å…è¿è¡Œæ—¶å‚æ•°é”™è¯¯å¯¼è‡´å´©æºƒã€‚
- **å®¢æˆ·ç«¯IDç±»å‹ä¿®å¤**ï¼šç¡®ä¿ä¼ å…¥ `Client._client_id` çš„ä¸º `bytes`ï¼ˆå¯¹å­—ç¬¦ä¸²è¿›è¡ŒUTF-8ç¼–ç ï¼‰ï¼Œé¿å…åº“å†…éƒ¨é‡å¤ `.decode()` å¯¼è‡´å¼‚å¸¸ã€‚
- **æ¶ˆæ¯å¤„ç†å¥å£®æ€§**ï¼š`on_message` ç°åœ¨å…¼å®¹ `bytes` ä¸ `str` payloadï¼Œè§£ç ä½¿ç”¨ `utf-8` å¹¶å®¹é”™ï¼Œå•æ¡æ¶ˆæ¯å¼‚å¸¸ä¸ä¼šå¯¼è‡´ä¸»è¿›ç¨‹é€€å‡ºã€‚

### ğŸ›¡ å½±å“èŒƒå›´
- ä¸»ç¨‹åºï¼ˆ`RC-main`ï¼‰å¯åŠ¨ä¸ç½‘ç»œç¨³å®šæ€§ç›¸å…³é€»è¾‘è¢«åŠ å›ºï¼›æ‰˜ç›˜ä¸GUIè¡Œä¸ºä¿æŒä¸å˜ã€‚
- ä»…ä¿®å¤å…¼å®¹æ€§/å¥å£®æ€§é—®é¢˜ï¼Œæ— æ–°å¢åŠŸèƒ½æˆ–è¡Œä¸ºæ”¹å˜ã€‚

### âœ… å»ºè®®éªŒè¯æ­¥éª¤
- **æ­£å¸¸ç½‘ç»œå¯åŠ¨**ï¼šç¨‹åºåº”å¸¸é©»å¹¶è‡ªåŠ¨è®¢é˜…ä¸»é¢˜ï¼Œé€šçŸ¥ä¸­å¿ƒä»…çŸ­æš‚æ˜¾ç¤º"æ­£åœ¨è¿æ¥â€¦"å¹¶åœ¨æˆåŠŸåè‡ªåŠ¨æ¸…é™¤ã€‚
- **æ— ç½‘ç»œå¯åŠ¨**ï¼šç¨‹åºä¸åº”é€€å‡ºï¼Œä¼šæ˜¾ç¤ºæ›¿æ¢å¼"æ­£åœ¨é‡è¯•"é€šçŸ¥ï¼›æ¢å¤ç½‘ç»œåæç¤ºè‡ªåŠ¨æ¶ˆå¤±å¹¶ç»§ç»­æ­£å¸¸å·¥ä½œã€‚


## å¼€å‘è€…å¿«é€Ÿå…¥é—¨

- å®‰è£…ä¾èµ–ï¼š

```powershell
python -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

- å¸¸ç”¨å‘½ä»¤ï¼š
  - æ¸…ç†æ„å»ºä¸è™šæ‹Ÿç¯å¢ƒï¼š `python scripts/cleanup.py`
  - æäº¤å˜æ›´å‰è¯·æ›´æ–° `md/up.md` å¹¶å‚é˜… `CONTRIBUTING.md`


## ç›®å½•

- æ¦‚è§ˆä¸ç‰¹æ€§
- ç»„ä»¶ç»“æ„
- å¿«é€Ÿå¼€å§‹ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
- MQTT é…ç½®ï¼ˆä¸¤ç§è®¤è¯æ¨¡å¼ï¼‰
- ä¸»é¢˜è¯´æ˜ï¼ˆå†…ç½® + è‡ªå®šä¹‰ï¼‰
- æ‰˜ç›˜ä¸æƒé™
- å®‰è£…ä¸æ‰“åŒ…
- å¼€æœºè‡ªå¯
- å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰
- åé¦ˆ

## æ¦‚è§ˆä¸ç‰¹æ€§

å¯æ¥å…¥ï¼šå°çˆ±åŒå­¦ã€å¤©çŒ«ç²¾çµç­‰ï¼Œæˆ–é€šè¿‡ MQTT æ¥å…¥ Home Assistantç­‰è‡ªå®šä¹‰æœåŠ¡å™¨ã€‚

æ ¸å¿ƒç‰¹æ€§ï¼ˆå½“å‰ 2.2.13ï¼‰ï¼š

åŸºç¡€èƒ½åŠ›ï¼š
- å¼€å…³ï¼šé‡å¯/é”å±ã€æ‰§è¡Œå‘½ä»¤ã€ç¨‹åº/è„šæœ¬å¯åœã€æœåŠ¡å¯åœï¼ˆæœåŠ¡éœ€ç®¡ç†å‘˜ï¼‰
- ç¯ï¼šè°ƒèŠ‚äº®åº¦ï¼ˆ0-100ï¼‰
- çª—å¸˜ï¼šè°ƒèŠ‚ç³»ç»ŸéŸ³é‡ï¼ˆ0-100ï¼‰ã€åª’ä½“æ§åˆ¶ï¼ˆä¸Šä¸€æ›²/ä¸‹ä¸€æ›²/æ’­æ”¾æš‚åœï¼Œæ”¯æŒç™¾åˆ†æ¯”æ˜ å°„ï¼‰
- è‡ªå®šä¹‰ä¸»é¢˜ï¼šç¨‹åºæˆ–è„šæœ¬ã€æœåŠ¡ã€å‘½ä»¤ã€æŒ‰é”®(Hotkey)
  - å‘½ä»¤ï¼šPowerShell æ‰§è¡Œï¼›æ”¯æŒçª—å£æ˜¾ç¤º/éšè—ï¼›å…³é—­å‘é€ CTRL_BREAK ä¼˜é›…ä¸­æ–­
  - çƒ­é”®ï¼šç»„åˆé”®ä¸ {down}/{up}ï¼›å­—æ¯æ®µé€å­—ç¬¦å‘é€ï¼Œå¯è®¾é—´éš”ï¼›GUI è‡ªå¸¦å½•åˆ¶å™¨
- ç¡çœ ä¸»é¢˜ï¼šsleep / hibernate / display_off / display_on / lockï¼Œæ”¯æŒ on/off å»¶æ—¶
- è„šæœ¬æ”¯æŒï¼š.ps1 / .py(.pyw) / .cmd(.bat) / .exeï¼›è‡ªåŠ¨é€‰æ‹©è§£é‡Šå™¨ï¼›å¢å¼ºç²¾ç¡®åŒ¹é…ä¸è¿›ç¨‹æ ‘ç»ˆæ­¢
- MQTTï¼šæ”¯æŒâ€œç§é’¥å®¢æˆ·ç«¯IDï¼ˆå¦‚å·´æ³•äº‘ï¼‰â€ä¸â€œç”¨æˆ·å/å¯†ç â€ä¸¤ç§è®¤è¯æ¨¡å¼
- æ‰˜ç›˜å…œåº•ï¼šæœªå¯åŠ¨ç‹¬ç«‹æ‰˜ç›˜æ—¶ï¼Œä¸»ç¨‹åºè‡ªåŠ¨å¯ç”¨å†…ç½®æ‰˜ç›˜
- ç®¡ç†å‘˜ä¸è‡ªå¯ï¼šè‡ªåŠ¨æ£€æµ‹ä¸æç¤ºææƒï¼›GUI ä¸€é”®è®¾ç½®/ç§»é™¤å¼€æœºè‡ªå¯
- é€šçŸ¥ï¼šWindows Toast å¯å¼€å…³

è¿‘æœŸæ–°å¢ / å¼ºåŒ–ï¼ˆ2.2.8 â†’ 2.2.13ï¼‰ï¼š
- åŠ¨æ€ç‰ˆæœ¬ç®¡ç†ï¼šç§»é™¤æºç ç¡¬ç¼–ç ç‰ˆæœ¬ï¼Œé›†ä¸­äº `version_info.py`ï¼Œæ‰“åŒ…ä¸å®‰è£…å™¨è„šæœ¬è‡ªåŠ¨æ³¨å…¥
- GitHub Actionsï¼šæ ‡ç­¾è§¦å‘è‡ªåŠ¨æ„å»ºä¸å‘å¸ƒï¼›é‡å¤åŒç‰ˆæœ¬æ„å»ºè‡ªåŠ¨åˆå¹¶æ›´æ–°æ—¥å¿—
- å¯åŠ¨æ—¥å¿—å¢å¼ºï¼šä¸»ç¨‹åºè¯¦ç»†è®°å½•ç‰ˆæœ¬/è¿è¡Œæ¨¡å¼/ç³»ç»Ÿç¯å¢ƒï¼Œä¾¿äºæ’éšœ
- æ‰˜ç›˜ç‰ˆæœ¬èœå•ï¼šç‚¹å‡»åå¼‚æ­¥æ£€æŸ¥æœ€æ–°ç‰ˆæœ¬ï¼Œèœå•æ–‡æœ¬å®æ—¶æ›´æ–°â€œæ£€æŸ¥ä¸­/æ–°ç‰ˆæœ¬/å·²æœ€æ–°/å¤±è´¥â€çŠ¶æ€å¹¶ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤è¯·æ±‚
- å®‰è£…å™¨æ”¹è¿›ï¼šInno Setup åŠ¨æ€ç”Ÿæˆä¸´æ—¶è„šæœ¬æ³¨å…¥ç‰ˆæœ¬ï¼›ä¿®å¤è¯¯æŠ¥â€œç¨‹åºæ­£åœ¨è¿è¡Œâ€çš„è¿›ç¨‹æ£€æµ‹é€»è¾‘
- æ›´å¥å£®çš„æœªçŸ¥ç‰ˆæœ¬å¤„ç†ï¼šæœ¬åœ°ç‰ˆæœ¬ç¼ºå¤±æ—¶æ˜¾ç¤ºâ€œVæœªçŸ¥ç‰ˆæœ¬â€å¹¶å§‹ç»ˆæç¤ºå¯æ›´æ–°
- æ„å»ºæ¸…æ´æ€§ï¼šæ‰“åŒ…è¿‡ç¨‹ä¸ä¿®æ”¹æºæ–‡ä»¶ï¼Œä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨æ¸…ç†

## ç»„ä»¶ç»“æ„

- `main.py` / `RC-main.exe`ï¼šä¸»ç¨‹åºï¼ˆMQTTã€ä¸»é¢˜æ‰§è¡Œã€è„šæœ¬/å‘½ä»¤ç®¡ç†ã€æ‰˜ç›˜å…œåº•ã€æƒé™ä¸è‡ªå¯ï¼‰
- `GUI.py` / `RC-GUI.exe`ï¼šå›¾å½¢é…ç½®ï¼ˆMQTTã€ä¸»é¢˜ç®¡ç†ã€çƒ­é”®å½•åˆ¶ã€å¼€æœºè‡ªå¯ï¼‰
- `tray.py` / `RC-tray.exe`ï¼šæ‰˜ç›˜ï¼ˆæ˜¾ç¤ºæ¨¡å¼/æƒé™ã€å¯åŠ¨/é‡å¯/å…³é—­ä¸»ç¨‹åºï¼‰
- `config.json`ï¼šé…ç½®æ–‡ä»¶ï¼ˆé¦–æ¬¡è¿è¡Œ GUI è‡ªåŠ¨ç”Ÿæˆï¼‰
- `dome_config.json`ï¼šé…ç½®ç¤ºä¾‹


## å¿«é€Ÿå¼€å§‹ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰

### æ­¥éª¤ 1ï¼šå‡†å¤‡ MQTTï¼ˆå·´æ³•äº‘æˆ–å…¶ä»–å¹³å°ï¼‰

ä¿®æ”¹ä½ çš„å·´æ³•äº‘è®¢é˜…å’Œå¯†é’¥ï¼Œå¹¶åˆ›å»ºç›¸åº”ä¸»é¢˜ï¼ˆè®°å¾—ä¿®æ”¹ä¸»é¢˜æ˜µç§°ï¼‰ã€‚ä¸»é¢˜å‘½åè§„åˆ™å¯å‚è€ƒå·´æ³•äº‘æ¥å…¥æ–‡æ¡£ï¼ˆå³ä¸Šè§’æ™ºèƒ½éŸ³ç®±éƒ¨åˆ†ï¼‰ï¼š[æ¥å…¥æ–‡æ¡£](https://cloud.bemfa.com/docs/src/speaker_mi.html)

æ³¨ï¼šå·´æ³•äº‘æ˜¯å…è´¹çš„ï¼Œè¯·è°¨æ…ä»˜è´¹ï¼

- ![å·´æ³•äº‘é…ç½®](res/å·´æ³•äº‘.png)

æç¤ºï¼šä½¿ç”¨å…¶ä»– MQTT å¹³å°ä¹Ÿå¯ä»¥ï¼Œæ”¯æŒâ€œç§é’¥å®¢æˆ·ç«¯IDâ€ä¸â€œç”¨æˆ·å/å¯†ç â€ä¸¤ç§è®¤è¯æ¨¡å¼ï¼›è¯¦è§ä¸‹æ–‡â€œMQTT é…ç½®â€ã€‚

### æ­¥éª¤ 2ï¼šé…ç½®å¹¶ä¿å­˜

- è¿è¡Œ `RC-GUI.exe`
- å¡«å†™ MQTTï¼ˆå¯†é’¥/è´¦å·å¯†ç /æœåŠ¡å™¨/ç«¯å£ï¼‰ï¼Œä¿å­˜ç”Ÿæˆ `config.json`
- åœ¨ GUI ä¸­å¯ç”¨æ‰€éœ€ä¸»é¢˜ï¼ˆtest æ¨¡å¼å¯æš‚ä¸å¯ç”¨ï¼‰

- ![GUIé…ç½®ç•Œé¢](res/GUI.png)

### æ­¥éª¤ 3ï¼šè¿è¡Œ

- ç›´æ¥è¿è¡Œæ‰˜ç›˜æˆ–ä¸»ç¨‹åºï¼š`RC-tray.exe` æˆ– `RC-main.exe`
  - æ‰˜ç›˜ç”¨äºç®¡ç†ä¸»ç¨‹åºï¼ˆæƒé™/å¯åŠ¨/é‡å¯/å…³é—­ï¼‰ï¼›å¦‚æœªè¿è¡Œç‹¬ç«‹æ‰˜ç›˜ï¼Œä¸»ç¨‹åºä¼šå¯ç”¨å†…ç½®æ‰˜ç›˜

### æ­¥éª¤ 4ï¼šç±³å®¶ç»‘å®šï¼ˆå¯é€‰ï¼‰

åœ¨ç±³å®¶ç»‘å®šå·´æ³•äº‘è´¦å·å¹¶åŒæ­¥è®¾å¤‡åï¼Œå¯ç”¨å°çˆ±è¿›è¡Œæ§åˆ¶ï¼š

- ![ç±³å®¶ç»‘å®š](res/ç±³å®¶.jpg)
- ![å°çˆ±åŒå­¦](res/å°çˆ±åŒå­¦.jpg)

## MQTT é…ç½®ï¼ˆä¸¤ç§è®¤è¯æ¨¡å¼ï¼‰

æ”¯æŒï¼š

- ç§é’¥å®¢æˆ·ç«¯IDï¼šå°†ç§é’¥å¡«å…¥ `client_id`ï¼ˆé€‚é…å·´æ³•äº‘ç­‰å¹³å°ï¼‰
- ç”¨æˆ·å/å¯†ç ï¼šå¡«å…¥ `mqtt_username` ä¸ `mqtt_password`ï¼Œå¹¶å°† `auth_mode` è®¾ä¸º `username_password`

ç¡®ä¿ `broker` ä¸ `port` æ­£ç¡®ï¼›è®¤è¯å¤±è´¥ä¼šå¼¹çª—å¹¶åœæ­¢é‡è¯•ï¼Œè¯·ä¿®æ­£é…ç½®åé‡å¯ã€‚

## ä¸»é¢˜è¯´æ˜ï¼ˆå†…ç½® + è‡ªå®šä¹‰ï¼‰

å†…ç½®ï¼š

- ç”µè„‘ï¼ˆå¼€å…³ï¼‰ï¼šon/off åŠ¨ä½œå¯é…ç½®ï¼ˆlock/shutdown/restart/...ï¼‰ï¼Œæ”¯æŒå»¶æ—¶
- å±å¹•ï¼ˆç¯ï¼‰ï¼šon=100ï¼Œoff=0ï¼Œ`on#æ•°å­—` è®¾ç½®äº®åº¦
- éŸ³é‡ï¼ˆçª—å¸˜ï¼‰ï¼šon=100ï¼Œoff=0ï¼Œ`on#æ•°å­—` è®¾ç½®éŸ³é‡ï¼›pause=é™éŸ³
- åª’ä½“ï¼ˆçª—å¸˜ï¼‰ï¼šon=ä¸Šä¸€æ›²ï¼Œoff=ä¸‹ä¸€æ›²ï¼Œpause=æ’­æ”¾/æš‚åœï¼›`on#ç™¾åˆ†æ¯”`ï¼š1-33 ä¸‹ä¸€æ›²ã€34-66 æ’­æ”¾/æš‚åœã€67-100 ä¸Šä¸€æ›²
- ç¡çœ ï¼ˆå¼€å…³ï¼‰ï¼šon/off å„è‡ªåŠ¨ä½œå¯é€‰ sleep/hibernate/display_off/display_on/lockï¼Œå¹¶å¯è®¾ç½®å»¶æ—¶

è‡ªå®šä¹‰ï¼š

- ç¨‹åºæˆ–è„šæœ¬ï¼š.ps1/.py/.pyw/.cmd/.bat/.exeï¼ˆè‡ªåŠ¨é€‰æ‹©è§£é‡Šå™¨/å¯åŠ¨æ–¹å¼ï¼‰
- æœåŠ¡ï¼šå¡«å†™æœåŠ¡åï¼›éœ€ä¸»ç¨‹åºä¸ºç®¡ç†å‘˜æƒé™
- å‘½ä»¤ï¼šPowerShell æ‰§è¡Œï¼›å¯é€‰æ˜¾ç¤º/éšè—çª—å£ï¼›å…³é—­å‘é€ CTRL_BREAK ä¼˜é›…ä¸­æ–­
- æŒ‰é”®(Hotkey)ï¼šç»„åˆé”®æˆ–å­—ç¬¦åºåˆ—ï¼›æ”¯æŒ {down}/{up}ï¼›å­—æ¯æ®µé€å­—ç¬¦å‘é€ä¸”å¯è®¾é—´éš”ï¼›GUI æä¾›â€œå½•åˆ¶â€

è„šæœ¬ç®¡ç†ï¼š

- .ps1 ä½¿ç”¨ `powershell.exe -ExecutionPolicy Bypass -File`
- .py/.pyw ä½¿ç”¨ `python.exe`
- .cmd/.bat ä½¿ç”¨ `cmd /c`
- ç»ˆæ­¢ä¼˜å…ˆç²¾ç¡®åŒ¹é…ï¼›.bat/.ps1 å¯ç”¨ wmic/psutil/taskkill å¢å¼ºç»ˆæ­¢ï¼Œå¹¶å¤„ç†è¿›ç¨‹æ ‘

## æ‰˜ç›˜ä¸æƒé™

æ‰˜ç›˜ç¨‹åº(`RC-tray.exe`)æä¾›ä¸»ç¨‹åºç®¡ç†ï¼ˆè‹¥æœªè¿è¡Œï¼Œä¸»ç¨‹åºä¼šå¯ç”¨å†…ç½®æ‰˜ç›˜ï¼‰ï¼š

1. **è¿è¡Œæ–¹å¼**ï¼šåŒå‡»`RC-tray.exe`å¯åŠ¨ï¼Œæ¨èä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œï¼›å•å‡»æ‰˜ç›˜å›¾æ ‡å¯ç›´æ¥æ‰“å¼€é…ç½®ç•Œé¢
2. **åŠŸèƒ½èœå•**ï¼š 
   ![tray](res/tray.png)
   - æ˜¾ç¤ºå½“å‰è¿è¡Œæ¨¡å¼(EXE/è„šæœ¬)å’Œæƒé™çŠ¶æ€
  - æ‰“å¼€é…ç½®ç•Œé¢ï¼šå¿«é€Ÿè®¿é—®GUIé…ç½®å·¥å…·ï¼ˆæ‰˜ç›˜å›¾æ ‡å•å‡»åŒæ ·è§¦å‘ï¼‰
  - ç‰ˆæœ¬èœå•ï¼šç‚¹å‡»æ‰“å¼€é¡¹ç›®ä¸»é¡µ
  - æ‰˜ç›˜çŠ¶æ€ï¼šç‚¹å‡»éšæœºæ‰“å¼€ res ä¸‹çš„å½©è›‹å›¾ç‰‡ï¼ˆcd1~cd5ï¼‰
   - æ£€æŸ¥ä¸»ç¨‹åºç®¡ç†å‘˜æƒé™ï¼šæŸ¥çœ‹ä¸»ç¨‹åºæ˜¯å¦å…·æœ‰ç®¡ç†å‘˜æƒé™
   - å¯åŠ¨ä¸»ç¨‹åºï¼šä»¥ç®¡ç†å‘˜æƒé™å¯åŠ¨ä¸»ç¨‹åº
   - é‡å¯ä¸»ç¨‹åºï¼šé‡æ–°å¯åŠ¨ä¸»ç¨‹åº(å…ˆå…³é—­åå¯åŠ¨)
   - å…³é—­ä¸»ç¨‹åºï¼šåœæ­¢ä¸»ç¨‹åºè¿è¡Œ
   - é€€å‡ºæ‰˜ç›˜ç¨‹åºï¼šå…³é—­æ‰˜ç›˜ä½†ä¿ç•™ä¸»ç¨‹åºè¿è¡Œ
  ä¸»ç¨‹åºè‡ªå¸¦æ‰˜ç›˜
   ![tray](res/main_tray.png)


è‡ªåŠ¨ç®¡ç†ï¼šæ‰˜ç›˜æ£€æµ‹ä¸»ç¨‹åºçŠ¶æ€ï¼›å¦‚ç‹¬ç«‹æ‰˜ç›˜æœªè¿è¡Œï¼Œä¸»ç¨‹åºä¼šå¯ç”¨å†…ç½®ç®€æ´æ‰˜ç›˜ã€‚

![Star History Chart](https://api.star-history.com/svg?repos=chen6019/Remote-Controls&type=Date)

## å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

- Q: å¯åŠ¨æŠ¥é”™â€œåº”ç”¨ç¨‹åºå·²åœ¨è¿è¡Œâ€ï¼Ÿ
  A: ç¨‹åºå·²å¯åŠ¨ï¼Œè¯·æ£€æŸ¥æ˜¯å¦æœ‰æ®‹ç•™è¿›ç¨‹ã€‚
- Q: é…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Ÿ
  A: è¯·å…ˆè¿è¡Œ GUI ç¨‹åºï¼Œä¿å­˜é…ç½®æ¥ä¿å­˜é…ç½®ã€‚
- Q: ä¼‘çœ /ç¡çœ ä¸å¯ç”¨ï¼Ÿ
  A: è¯·ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ cmdï¼Œå¹¶å°è¯•æ‰§è¡Œ
```bash
  powercfg /hibernate on
```
- Q: MQTT æ— æ³•è¿æ¥ï¼Ÿ
  A: æ£€æŸ¥æœåŠ¡å™¨åœ°å€ã€ç«¯å£ã€è®¤è¯æ¨¡å¼ä¸å‡­æ®æ˜¯å¦æ­£ç¡®ï¼Œç½‘ç»œæ˜¯å¦ç•…é€šã€‚ä»V2.3.4èµ·ï¼Œç¨‹åºæ”¯æŒå¼±ç½‘ç¯å¢ƒä¸‹çš„è‡ªåŠ¨é‡è¿ï¼Œæ— éœ€æ‰‹åŠ¨é‡å¯ã€‚
- Q: å¼±ç½‘æˆ–ç½‘ç»œä¸ç¨³å®šæ—¶ç¨‹åºä¼šé€€å‡ºå—ï¼Ÿ
  A: ä»V2.3.4èµ·ï¼Œç¨‹åºæ”¹ä¸ºå¼‚æ­¥MQTTè¿æ¥å¹¶å¯ç”¨è‡ªåŠ¨é‡è¿ï¼ˆ2s-30sé€€é¿ï¼‰ï¼Œå¼±ç½‘åœºæ™¯ä¸‹ä¼šæŒç»­é‡è¯•å¹¶æ˜¾ç¤º"æ­£åœ¨é‡è¯•"é€šçŸ¥ï¼Œç½‘ç»œæ¢å¤åè‡ªåŠ¨æ¸…é™¤æç¤ºï¼Œä¸ä¼šé€€å‡ºã€‚
- Q: æ‰˜ç›˜ç¨‹åºæ— æ³•æ£€æµ‹åˆ°ä¸»ç¨‹åºï¼Ÿ
  A: è¯·å°è¯•ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œæ‰˜ç›˜ç¨‹åºï¼Œå¯èƒ½æ˜¯æƒé™é—®é¢˜å¯¼è‡´ã€‚
- Q: è„šæœ¬æ— æ³•å¯åŠ¨ï¼Ÿ
  A: æ£€æŸ¥è„šæœ¬è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œä»¥åŠæ˜¯å¦æœ‰è¿è¡Œæ‰€éœ€çš„æƒé™ã€‚å¯¹äºPowerShellè„šæœ¬ï¼Œç¡®ä¿æ‰§è¡Œç­–ç•¥å…è®¸è„šæœ¬è¿è¡Œã€‚
- Q: PowerShellè„šæœ¬æŠ¥é”™"ä¸æ˜¯æœ‰æ•ˆçš„ Win32 åº”ç”¨ç¨‹åº"ï¼Ÿ
  A: è¿™é€šå¸¸æ˜¯å› ä¸ºç›´æ¥æ‰§è¡Œ.ps1æ–‡ä»¶å¯¼è‡´çš„ï¼Œç¨‹åºä¼šè‡ªåŠ¨ä½¿ç”¨powershell.exeæ¥å¯åŠ¨è„šæœ¬ã€‚
- Q: è„šæœ¬ç»ˆæ­¢æ—¶è¯¯å…³é—­äº†å…¶ä»–ç¨‹åºï¼Ÿ
  A: ç¨‹åºå·²ä¼˜åŒ–è¿›ç¨‹åŒ¹é…é€»è¾‘ï¼Œç°åœ¨ä¼šç²¾ç¡®è¯†åˆ«å’Œç»ˆæ­¢è„šæœ¬ç›¸å…³è¿›ç¨‹ï¼Œé¿å…è¯¯ç»ˆæ­¢ç”¨æˆ·ç¨‹åºã€‚
- Q: å‘½ä»¤ç±»å‹å…³é—­æ€ä¹ˆå·¥ä½œï¼Ÿ
  A: å…³é—­æ—¶ä¼šå‘æ–°æ§åˆ¶å°/è¿›ç¨‹ç»„å‘é€ CTRL_BREAK ä¼˜é›…ä¸­æ–­ï¼Œå¤±è´¥å†å°è¯•ç»ˆæ­¢ã€‚
- Q: çƒ­é”®ä¸ç”Ÿæ•ˆæˆ–å«ä¸­æ–‡ï¼Ÿ
  A: è¯·ä»…ä½¿ç”¨è‹±æ•°å­—/åŠŸèƒ½é”®ï¼›GUI ä¼šæç¤ºåŒ…å«ä¸­æ–‡çš„ç»„åˆå¯èƒ½æ— æ³•è§£æã€‚
- Q: ä¾èµ–å®‰è£…å¤±è´¥ï¼Ÿ
  A: å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå®‰è£…ï¼Œç¡®ä¿Pythonç‰ˆæœ¬ä¸º3.12.10åŠä»¥ä¸Šï¼Œä½¿ç”¨requirements.txtå®‰è£…å…¨éƒ¨ä¾èµ–ã€‚
- Q: æ‰“åŒ…åç¨‹åºæ— æ³•è¿è¡Œï¼Ÿ
  A: ä¼˜å…ˆä½¿ç”¨PyInstalleræ‰“åŒ…æ–¹å¼ï¼ˆbuild.ps1ï¼‰ï¼Œç¡®ä¿ä½¿ç”¨PyInstaller 6.13.0åŠä»¥ä¸Šç‰ˆæœ¬ã€‚å¦‚é‡é—®é¢˜å¯å°è¯•Nuitkaå¤‡ç”¨æ–¹å¼ï¼ˆbuild-nuitka.ps1ï¼‰ã€‚

- Q: Nuitkaæ‰“åŒ…çš„æ‰˜ç›˜ç¨‹åºå›¾æ ‡ä¸æ˜¾ç¤ºï¼Ÿ
  A: å·²çŸ¥é—®é¢˜ï¼Œæ¨èä½¿ç”¨PyInstalleræ‰“åŒ…ã€‚Nuitkaä½œä¸ºå¤‡ç”¨é€‰é¡¹ä¸»è¦ç”¨äºç”Ÿæˆä½“ç§¯æ›´å°çš„EXEæ–‡ä»¶ã€‚

## å®‰è£…ä¸æ‰“åŒ…

### 1. ç¯å¢ƒè¦æ±‚

- **Pythonç‰ˆæœ¬**: Python 3.12.10 åŠä»¥ä¸Šï¼ˆæ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11ï¼ˆæœ‰è·¨å¹³å°è®¡åˆ’ï¼Œä½†æš‚æ— Macæ”¯æŒï¼‰
- **ç³»ç»Ÿç»„ä»¶**: PowerShellï¼ˆç”¨äº.ps1è„šæœ¬ï¼‰ã€CMDï¼ˆç”¨äºæ‰¹å¤„ç†è„šæœ¬ï¼‰

### 2. ä¾èµ–å®‰è£…

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ requirements.txtï¼ˆæ¨èï¼‰**
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv .venv
.venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…æ ¸å¿ƒä¾èµ–**
```bash
pip install paho-mqtt>=2.1.0 wmi>=1.5.1 win11toast>=0.35 pillow>=11.2.0 pystray>=0.19.5 comtypes>=1.4.10 pycaw>=20240210 psutil>=7.0.0 pywin32>=310 pyautogui>=0.9.54
pip install --upgrade setuptools
```

**å¸¸è§é—®é¢˜è§£å†³ï¼š**
- å¦‚é‡ tkinter ç›¸å…³æŠ¥é”™ï¼ˆå¦‚ init.tcl æ‰¾ä¸åˆ°ï¼‰ï¼Œè¯·å°† `tcl/tk` æ–‡ä»¶å¤¹å¤åˆ¶åˆ° Python çš„ `Lib` ç›®å½•ä¸‹
- ç¡®ä¿ PowerShell æ‰§è¡Œç­–ç•¥å…è®¸è„šæœ¬è¿è¡Œï¼š`Set-ExecutionPolicy RemoteSigned`

### 3. æ‰“åŒ…è¯´æ˜

é¡¹ç›®æä¾›äº†å®Œæ•´çš„è‡ªåŠ¨åŒ–æ‰“åŒ…æµç¨‹ï¼Œæ”¯æŒä¸¤ç§æ‰“åŒ…æ–¹å¼ï¼š

**æ¨èæ–¹å¼ï¼šPyInstallerï¼ˆä¸»è¦ï¼‰**
```bash
# ä¸€é”®æ‰“åŒ…ï¼ˆæ¨èï¼‰
.\build.ps1

# æˆ–æ‰‹åŠ¨è¿è¡Œå®Œæ•´æ‰“åŒ…è„šæœ¬
pwsh -NoProfile -ExecutionPolicy Bypass -File installer/build_installer.ps1
```

**å¤‡ç”¨æ–¹å¼ï¼šNuitkaï¼ˆå®éªŒæ€§ï¼‰**
```bash
# å®éªŒæ€§æ‰“åŒ…ï¼ˆä½“ç§¯æ›´å°ï¼Œä½†å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼‰
.\build-nuitka.ps1

# æˆ–æ‰‹åŠ¨è¿è¡Œ
pwsh -NoProfile -ExecutionPolicy Bypass -File installer/build_nuitka.ps1
```

**æ‰‹åŠ¨æ‰“åŒ…ï¼ˆPyInstaller â‰¥ 6.13.0ï¼‰**
```bash
# å®‰è£…æ‰“åŒ…å·¥å…·
pip install pyinstaller>=6.13.0

# æ‰“åŒ…ä¸»ç¨‹åº
pyinstaller -F -n RC-main --windowed --icon=res\\icon.ico --add-data "res\\icon.ico;." main.py

# æ‰“åŒ…GUIç¨‹åº
pyinstaller -F -n RC-GUI --noconsole --icon=res\\icon_GUI.ico \
  --add-data "res\\icon_GUI.ico;res" --add-data "res\\top.ico;res" GUI.py

# æ‰“åŒ…æ‰˜ç›˜ç¨‹åºï¼ˆåŸºç¡€ç‰ˆï¼‰
pyinstaller -F -n RC-tray --windowed --icon=res\\icon.ico --add-data "res\\icon.ico;." tray.py

# æ‰“åŒ…æ‰˜ç›˜ç¨‹åºï¼ˆå®Œæ•´ç‰ˆï¼ŒåŒ…å«å½©è›‹å›¾ç‰‡ï¼‰
pyinstaller -F -n RC-tray --windowed --icon=res\\icon.ico \
  --add-data "res\\icon.ico;." \
  --add-data "res\\cd1.jpg;res" --add-data "res\\cd2.jpg;res" \
  --add-data "res\\cd3.jpg;res" --add-data "res\\cd4.jpg;res" --add-data "res\\cd5.png;res" \
  tray.py
```

**æ‰‹åŠ¨æ‰“åŒ…ï¼ˆNuitka - å®éªŒæ€§ï¼‰**
```bash
# å®‰è£…æ‰“åŒ…å·¥å…·
pip install nuitka zstandard

# æ‰“åŒ…ä¸»ç¨‹åº
python -m nuitka --onefile --assume-yes-for-downloads \
  --windows-console-mode=disable --windows-icon-from-ico=res\\icon.ico \
  --include-data-files=res\\icon.ico=icon.ico \
  --output-filename=RC-main.exe --output-dir=build-nuitka main.py

# æ‰“åŒ…GUIç¨‹åº
python -m nuitka --onefile --assume-yes-for-downloads \
  --enable-plugin=tk-inter --windows-console-mode=disable \
  --windows-icon-from-ico=res\\icon_GUI.ico \
  --include-data-files=res\\icon_GUI.ico=res\\icon_GUI.ico \
  --include-data-files=res\\top.ico=res\\top.ico \
  --output-filename=RC-GUI.exe --output-dir=build-nuitka GUI.py

# æ‰“åŒ…æ‰˜ç›˜ç¨‹åºï¼ˆå®Œæ•´ç‰ˆï¼ŒåŒ…å«å½©è›‹å›¾ç‰‡ï¼‰
python -m nuitka --onefile --assume-yes-for-downloads --follow-imports \
  --windows-console-mode=disable --windows-icon-from-ico=res\\icon.ico \
  --include-data-files=res\\icon.ico=icon.ico \
  --include-data-files=res\\cd1.jpg=res\\cd1.jpg \
  --include-data-files=res\\cd2.jpg=res\\cd2.jpg \
  --include-data-files=res\\cd3.jpg=res\\cd3.jpg \
  --include-data-files=res\\cd4.jpg=res\\cd4.jpg \
  --include-data-files=res\\cd5.png=res\\cd5.png \
  --output-filename=RC-tray.exe --output-dir=build-nuitka tray.py
```

**æ‰“åŒ…è¾“å‡ºè¯´æ˜ï¼š**
- EXEæ–‡ä»¶ï¼š`installer/dist/RC-*.exe`
- å®‰è£…åŒ…ï¼š`installer/dist/installer/Remote-Controls-Installer-<version>.exe`
- ä¸­é—´æ–‡ä»¶ï¼š`installer/build/`ï¼ˆPyInstallerï¼‰æˆ– `installer/build-nuitka/`ï¼ˆNuitkaï¼‰

**æ‰“åŒ…æ–¹å¼å¯¹æ¯”ï¼š**
| æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| PyInstaller | å…¼å®¹æ€§å¥½ï¼Œç¼–è¯‘é€Ÿåº¦å¿« | æ–‡ä»¶ä½“ç§¯è¾ƒå¤§ | æ¨èæ—¥å¸¸ä½¿ç”¨ |
| Nuitka | æ–‡ä»¶ä½“ç§¯å° | ç¼–è¯‘é€Ÿåº¦æ…¢ | è¿½æ±‚å°ä½“ç§¯æ—¶çš„å¤‡ç”¨é€‰æ‹© |

æç¤ºï¼šæ‰“åŒ…åé¦–æ¬¡è¿è¡Œ GUI ä»¥ç”Ÿæˆ/æ›´æ–° `config.json`ï¼›å¦‚è®¾ç½®äº†è®¡åˆ’ä»»åŠ¡è‡ªå¯ï¼Œç§»åŠ¨æ–‡ä»¶ä½ç½®åéœ€é‡æ–°è®¾ç½®ä»»åŠ¡ã€‚

### 4. å¼€æœºè‡ªå¯ï¼ˆå¯é€‰ï¼‰

åœ¨ GUI ä¸­å¯ä¸€é”®åˆ›å»º/ç§»é™¤è®¡åˆ’ä»»åŠ¡ï¼š

- æ–¹æ¡ˆä¸€ï¼šç”¨æˆ·ç™»å½•æ—¶è¿è¡Œï¼ˆä½¿ç”¨ Administrators ç»„ï¼Œæ¨èâ€œæ— æ‰˜ç›˜â€åœºæ™¯ï¼‰
- æ–¹æ¡ˆäºŒï¼šç³»ç»Ÿå¯åŠ¨æ—¶è¿è¡Œï¼ˆä½¿ç”¨ SYSTEMï¼›æ‰˜ç›˜å¯åœ¨ç™»å½•åå¯åŠ¨å¹¶é‡å¯ä¸»ç¨‹åºä»¥è·å¾—åª’ä½“æ§åˆ¶ï¼‰

## Recent Commits

åŸºäºæœ€æ–°gitè®°å½•çš„å¼€å‘æ›´æ–°ï¼š

- **V2.3.4**: æ›´æ–°å¼±ç½‘ç¯å¢ƒå…¼å®¹æ€§ä¸å¯åŠ¨ç¨³å®šæ€§ï¼Œä¿®å¤å¤šé¡¹å…³é”®é—®é¢˜
- ä¿®å¤æ‰˜ç›˜æ— æ³•å¯åŠ¨ä¸»ç¨‹åºçš„é—®é¢˜
- æ·»åŠ ç½‘ç»œé‡è¿æœºåˆ¶ï¼Œä¼˜åŒ–MQTTè¿æ¥å¤±è´¥æ—¶çš„ç”¨æˆ·æç¤ºä¸é‡è¯•é€»è¾‘
- æ›´æ–°éšæœºå›¾ç‰‡æ¥å£URL
- å¢å¼ºç®¡ç†å‘˜æƒé™è¿è¡Œç¨‹åºå’Œè„šæœ¬çš„å®‰å…¨æ€§ï¼Œæ·»åŠ ç³»ç»Ÿå°±ç»ªæ£€æŸ¥ä¸å¤šç§å¯åŠ¨æ–¹æ¡ˆ
- å¢å¼ºç³»ç»Ÿå°±ç»ªæ£€æŸ¥ä¸å®‰å…¨æ‰“å¼€URLé€»è¾‘ï¼Œè§£å†³è®¡åˆ’ä»»åŠ¡å¯åŠ¨æ—¶çš„å´©æºƒé—®é¢˜

å®Œæ•´æäº¤å†å²è¯·æŸ¥çœ‹ [GitHub Commits](https://github.com/chen6019/Remote-Controls/commits/main)ã€‚

## åé¦ˆä¸äº¤æµ

å¦‚æœ‰é—®é¢˜ã€å»ºè®®æˆ– Bug åé¦ˆï¼Œè¯·é€šè¿‡ GitHub Issue æˆ–é‚®ç®±ï¼ˆmc_chen6019@qq.comï¼‰è”ç³»ä½œè€…ã€‚

---
